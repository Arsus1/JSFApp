<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough" xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <ui:include src="template/head.xhtml"/>
</h:head>

<h:body>
    <ui:include src="template/navbar.xhtml">
        <ui:param name="page" value="main"></ui:param>
    </ui:include>


    <div class="container" >

        <div class="mt-5 d-block d-lg-flex justify-content-around" style=" background: #91a3ad;">
            <div id="graph-plate" class="d-flex justify-content-center">
                <svg id="graph-svg" xmlns="http://www.w3.org/2000/svg" width="400" height="400" style="">
                    <rect id="backgroundrect" width="100%" height="100%" x="0" y="0" fill="none" stroke="none"/>
                    <g class="currentLayer" style=""><title>Layer 1</title>
                        <rect x="200" y="200" width="140" height="70" fill="#82bdff" id="svg_1"
                              class=""/>
                        <polygon
                                points="164,305 164,165 94,305 "
                                fill="#82bdff" id="svg_2" class=""
                                transform="rotate(-90 129.4375,235) "/>
                        <path d="M200,200 L270,200 A-70,-70 0 0 0 200,140 "
                              fill="#82bdff" id="svg_3" class=""/>
                        <polygon
                                points="15,200 60,200 60,197 60,203 60,200 130,200 130,197 130,203 130,200 270,200 270,197 270,203 270,200         340,200 340,197 340,203 340,200 385,200 378,197 385,200 378,203 385,200"
                                stroke="grey" id="svg_4"/>
                        <polygon
                                points="200,385 200,340 197,340 203,340 200,340 200,270 197,270 203,270 200,270 200,130 197,130 203,130         200,130 200,60 197,60 203,60 200,60 200,15 197,22 200,15 203,22 200,15"
                                stroke="grey" id="svg_5"/>
                        <circle r="2" cx="200" cy="200" fill="grey" id="svg_6"/>
                        <circle id="dot" r="3" cx="200" cy="200" fill="grey"/>
                        <text class="point" x="53" y="195" id="svg_7">-R</text>
                        <text class="point" x="118" y="195" id="svg_8">-R/2</text>
                        <text class="point" x="262" y="195" id="svg_9">R/2</text>
                        <text class="point" x="335" y="195" id="svg_10">R</text>
                        <text class="point" x="205" y="64" id="svg_11">R</text>
                        <text class="point" x="205" y="134" id="svg_12">R/2</text>
                        <text class="point" x="205" y="274" id="svg_13">-R/2</text>
                        <text class="point" x="205" y="344" id="svg_14">-R</text>
                    </g>
                </svg>
            </div>
            <div class="invalid-feedback p-5">Please select R value</div>


            <div>
                <h4 class="mb-4 mt-5 mt-lg-0 text-center">Area Form</h4>
                <div class="d-flex justify-content-center">
                    <h:form class="d-block" prependId="false">


                        <label class="font-weight-bold mb-0">X value:</label>
                        <div class="d-flex">
                            <small class="form-text text-muted mr-1 mb-2">Selected:</small>
                            <h:outputText class="form-text text-muted" id="x-selected"
                                          value="#{controller.item.x}">0</h:outputText>
                        </div>
                        <div class="form-group mb-1 d-block">
                            <p:inputText id="x-value-input" value="#{controller.item.x}" type="hidden"/>
                            <p:slider for="x-value-input" id="x-value" step="0.5" minValue="-2" maxValue="2"
                                      display="x-selected" displayTemplate="{value}">
                                <p:ajax event="slideEnd" process="@this, x-value"/>
                                <!--                            <p:ajax event="slideEnd" execute="@this" render="x-value" />-->
                            </p:slider>
                            <!--                        <ace:sliderEntry length="auto" id="x-value" min="-2" max="2" stepPercent="20"-->
                            <!--                                         value="#{controller.test}">-->
                            <!--                            <ace:ajax event="slideEnd" execute="@this" render="x-value"/>-->
                            <!--                        </ace:sliderEntry>-->
                        </div>


                        <div class="form-group" id="y-input">
                            <label class="font-weight-bold mb-0" for="y-text">Y value:</label>
                            <small class="form-text text-muted mb-2">Must be from -5 to 5</small>
                            <h:inputText maxlength="16" autocomplete="off" id="y-text" styleClass="form-control y-text"
                                         a:placeholder="Enter value" type="text" value="#{controller.item.y}">
                                <f:ajax event="keyup"/>
                            </h:inputText>
                            <div class="invalid-feedback">Please enter valid y value</div>
                        </div>


                        <label class="font-weight-bold mb-0">R value:</label>
                        <div class="d-flex">
                            <small class="form-text text-muted mr-1 mb-2">Selected:</small>
                            <small class="form-text text-muted" id="r-selected">(select value)</small>
                        </div>
                        <div class="form-group" id="r-input">
                            <h:commandLink value="1" styleClass="btn btn-light r-button" type="button"
                                           action="#{controller.item.setR(1)}"/>

                            <h:commandLink value="2" styleClass="btn btn-light r-button" type="button"
                                           action="#{controller.item.setR(2)}"/>

                            <h:commandLink value="3" styleClass="btn btn-light r-button" type="button"
                                           action="#{controller.item.setR(3)}"/>

                            <h:commandLink value="4" styleClass="btn btn-light r-button" type="button"
                                           action="#{controller.item.setR(4)}"/>

                            <h:commandLink value="5" styleClass="btn btn-light r-button" type="button"
                                           action="#{controller.item.setR(5)}"/>
                            <div class="invalid-feedback">Please select R value</div>
                        </div>


                        <div class="form-group text-center mt-4">
                            <h:commandButton value="Submit" styleClass="btn m-1 btn-primary submit-button"
                                             type="submit" action="#{controller.addItem}">
                            </h:commandButton>
                            <h:commandButton value="Clear form" styleClass="btn m-1 btn-secondary clear-from-button"
                                             type="button"/>
                            <h:commandButton value="Clear table" styleClass="btn m-1 btn-secondary"
                                             type="button" action="#{controller.deleteTable}">
                                <f:ajax execute="@form" render="point-table"/>
                            </h:commandButton>
                        </div>
                    </h:form>
                </div>
            </div>


        </div>
    </div>


        <div class="">
            <div class="mt-md-5">
                <div style="height:600px;overflow-y:scroll; background: lightsteelblue" id="result" class="custom_scrollbar">
                    <h4 class="mb-4 text-center">Results table</h4>
                    <h:dataTable var="point" value="#{controller.items}" styleClass="table table-hover text-center"
                                 id="point-table">
                        <h:column>
                            <f:facet name="header">X value</f:facet>
                            #{point.x}
                        </h:column>

                        <h:column>
                            <f:facet name="header">Y value</f:facet>
                            #{point.y}
                        </h:column>

                        <h:column>
                            <f:facet name="header">R value</f:facet>
                            #{point.r}
                        </h:column>

                        <h:column>
                            <f:facet name="header">Result</f:facet>
                            #{point.hit}
                        </h:column>

                        <h:column>
                            <f:facet name="header">Execution time</f:facet>
                            <h:outputText value="#{point.time}">
                                <f:convertNumber pattern="#.#####"/>
                            </h:outputText>
                        </h:column>
                    </h:dataTable>
                </div>
            </div>
        </div>
    <ui:include src="template/footer.xhtml"/>
    <h:outputScript library="js" name="main.js"/>
</h:body>
</html>
